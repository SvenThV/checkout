<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | ShopEasy</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to the shared CSS file -->
</head>
<body>
    <!-- Header Section -->
    <header>
        <h1>Welcome to ShopEasy</h1>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Shops Section -->
        <section id="shops" class="section">
            <h2>Shops</h2>
            <div class="shop-list" id="shop-list">
                <!-- Dynamic content will be inserted here -->
            </div>
        </section>

        <!-- Recent Purchases Section -->
        <section id="recent-purchases" class="section">
            <h2>Recent Purchases</h2>
            <div class="purchase-list">
                <!-- Static placeholder content -->
                <div class="purchase-item">Purchase 1</div>
                <div class="purchase-item">Purchase 2</div>
                <div class="purchase-item">Purchase 3</div>
            </div>
        </section>
    </main>

    <!-- Footer Navigation -->
    <footer class="footer">
        <a href="index.html" class="icon" aria-label="Home">üè†</a>
        <a href="barcode.html" class="icon" aria-label="Scanner">üîç</a>
        <a href="receipts.html" class="icon" aria-label="Receipts">üìÑ</a>
        <a href="cart.html" class="icon" aria-label="Cart">üì¶</a>
        <a href="account.html" class="icon" aria-label="Account">üë§</a>
    </footer>

    <!-- JavaScript to Fetch Shops -->
    <script>
        // Fetch shops from the backend API and display them
        async function fetchShops() {
            const shopList = document.getElementById('shop-list');
            shopList.innerHTML = '<p>Loading...</p>'; // Placeholder while loading

            try {
                // Fetch data from the API
                const response = await fetch('http://localhost:5000/api/shops');
                if (!response.ok) {
                    throw new Error('Failed to fetch shops');
                }

                // Parse the response JSON
                const shops = await response.json();

                // Display the shops
                if (shops.length > 0) {
                    shopList.innerHTML = shops
                        .map(shop => `<div class="shop-card">${shop.shop_name}</div>`)
                        .join('');
                } else {
                    shopList.innerHTML = '<p>No shops available.</p>';
                }
            } catch (error) {
                console.error('Error fetching shops:', error);
                shopList.innerHTML = '<p>Error loading shops. Please try again later.</p>';
            }
        }

        // Fetch shops when the page loads
        document.addEventListener('DOMContentLoaded', fetchShops);
    </script>
</body>
</html>